<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> NoSQL数据库介绍 · Brno Kerzenlicht's Home</title><meta name="description" content="NoSQL数据库介绍 - Brno Kerzenlicht"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico?v=2019"><link rel="stylesheet" href="/css/style.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Brno Kerzenlicht's Home"></head><body><div class="wrap"><header><h1 class="title">Brno Kerzenlicht’s Home</h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives/" target="_self">ARCHIVE</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">NoSQL数据库介绍</h1><div class="post-info">Feb 15, 2019</div><div class="post-content"><p>NoSQL 数据库介绍以及 NoSQL 数据库的选择</p>
<a id="more"></a>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>NoSQL 指的是<strong>非关系型的数据库</strong>。NoSQL 最常见的解释是 non-relational，有时也称作 Not Only SQL 的缩写，是<strong>对不同于传统的关系型数据库的数据库管理系统的统称</strong>。主要用于<strong>超大规模数据</strong>的存储。（例如 Google 或Facebook 每天为他们的用户收集万亿比特的数据）。这些类型的数据存储<strong>不需要固定的模式</strong>，<strong>无需多余操作就可以横向扩展</strong>。MySQL 和 NoSQL 都有各自的特点和使用的应用场景，两者的紧密结合将会给 web2.0 的数据库发展带来新的思路。<strong>让关系数据库关注在关系上，NoSQL 关注在存储上</strong>。</p>
<h3 id="RDBMS-vs-NoSQL"><a href="#RDBMS-vs-NoSQL" class="headerlink" title="RDBMS vs NoSQL"></a>RDBMS vs NoSQL</h3><p>RDBMS</p>
<ul>
<li>高度组织化结构化数据</li>
<li>结构化查询语言 (SQL)</li>
<li>数据和关系都存储在单独的表中</li>
<li>数据操纵语言，数据定义语言</li>
<li>严格的一致性</li>
<li>基础事务</li>
</ul>
<p>NoSQL</p>
<ul>
<li>代表着不仅仅是SQL</li>
<li>没有声明性查询语言</li>
<li>没有预定义的模式 -键 - 值对存储，列存储，文档存储，图形数据库</li>
<li>最终一致性，而非ACID属性</li>
<li>非结构化和不可预知的数据</li>
<li>CAP定理</li>
<li>高性能，高可用性和可伸缩性</li>
</ul>
<h3 id="常见的-NoSQL-数据库"><a href="#常见的-NoSQL-数据库" class="headerlink" title="常见的 NoSQL 数据库"></a>常见的 NoSQL 数据库</h3><p>目前 NoSQL 类型的数据库至少有225种，详细内容见<a href="http://nosql-database.org/" target="_blank" rel="noopener">官网</a> ，下面对常见的几种 NoSQL 数据库进行简单介绍</p>
<h4 id="键值存储数据库"><a href="#键值存储数据库" class="headerlink" title="键值存储数据库"></a>键值存储数据库</h4><p>这一类数据库主要会使用到一个哈希表，这个表中有一个特定的键和一个指针指向特定的数据。Key/value模型对于IT系统来说的优势在于<strong>简单、易部署</strong>。</p>
<h5 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h5><p>redis是一个基于内存的 key-value 存储系统，同时提供了更加丰富的数据结构和运算的能力，成功用法是替代memcached，通过 checkpoint 和 commit log 提供了快速的宕机恢复，同时支持 replication 提供读可扩展和高可用。</p>
<p>适用场景</p>
<p>适用于数据变化快且数据库大小可预见（适合内存容量）的应用程序</p>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://redis.io/" target="_blank" rel="noopener">https://redis.io/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/antirez/redis" target="_blank" rel="noopener">https://github.com/antirez/redis</a></p>
</li>
</ul>
<h5 id="LevelDB"><a href="#LevelDB" class="headerlink" title="LevelDB"></a>LevelDB</h5><p>一个 google 实现的非常高效的 key-value 数据库，LevelDB 是单进程的服务，性能非常之高，在一台4核Q6600的CPU机器上，每秒钟写数据超过40w，而随机读的性能每秒钟超过10w。此处随机读是完全命中内存的速度，如果是不命中速度大大下降。</p>
<p>特性</p>
<ul>
<li><p>键值都是string类型</p>
</li>
<li><p>基于磁盘，数据量不受限于内存大小</p>
</li>
<li><p>模型单一简单，数据落盘高可靠</p>
</li>
<li><p>LSM模型天然写优化</p>
</li>
<li><p>顺序写盘的方式非常适合于ssd</p>
</li>
<li><p>支持数据压缩等操作，这对于减小存储空间以及增快IO效率都有直接的帮助</p>
</li>
<li><p>可以指定排序规则</p>
</li>
<li><p>不足是仅提供了一个库，需要自己封装server端</p>
</li>
</ul>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="http://leveldb.org/" target="_blank" rel="noopener">http://leveldb.org/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/google/leveldb" target="_blank" rel="noopener">https://github.com/google/leveldb</a></p>
</li>
</ul>
<h5 id="RocksDB"><a href="#RocksDB" class="headerlink" title="RocksDB"></a>RocksDB</h5><p>RocksDB 是使用 C++ 编写的嵌入式kv存储引擎，其键值均允许使用二进制流。由 Facebook 基于 levelDB 开发，提供向后兼容的 levelDB API。</p>
<p>特性</p>
<ul>
<li>可用于存储键和值,可以是任意大小的字节流</li>
<li>支持原子读和写</li>
<li>具有高度灵活的配置功能,可以通过配置使其运行在各种各样的生产环境,包括纯内存,Flash,硬盘或HDFS</li>
<li>支持各种压缩算法，并提供了便捷的生产环境维护和调试工具</li>
<li>为快速而又低延迟的存储设备（例如闪存或者高速硬盘）而特殊优化处理。RocksDB将最大限度的发挥闪存和RAM的高度率读写性能</li>
<li>前缀迭代器：应用可以指定一个键值前缀，配置一个前缀提取器。针对每个键值前缀，RockDB都会其来存储bloom。通过bloom，迭代器在扫描指定前缀的键值的时候，就可以避免扫描那些没有这种前缀键值的文件了</li>
<li>数据库中的所有数据都是逻辑上排好序的</li>
</ul>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://rocksdb.org/" target="_blank" rel="noopener">https://rocksdb.org/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/facebook/rocksdb" target="_blank" rel="noopener">https://github.com/facebook/rocksdb</a></p>
</li>
<li><p>中文网站</p>
<p><a href="https://rocksdb.org.cn/" target="_blank" rel="noopener">https://rocksdb.org.cn/</a></p>
</li>
</ul>
<h4 id="文档型数据库"><a href="#文档型数据库" class="headerlink" title="文档型数据库"></a>文档型数据库</h4><p>文档型数据库的灵感是来自于 Lotus Notes 办公软件的，而且它同第一种键值存储相类似。该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储，比如 JSON。文档型数据库可 以看作是<strong>键值数据库的升级版</strong>，允许之间嵌套键值。而且文档型数据库<strong>比键值数据库的查询效率更高</strong>。</p>
<h5 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h5><p>MongoDB 是一个基于分布式文件存储的数据库，介于关系数据库和非关系数据库之间，<strong>是非关系数据库当中功能最丰富，最像关系数据库的</strong>。MongoDB 最大的特点是他支持的<strong>查询语言非常强大</strong>，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还<strong>支持对数据建立索引并指定索引有效期</strong>。MongoDB 支持 RUBY，PYTHON，JAVA，C++，PHP，C# 等多种语言。</p>
<p>MongoDB 最吸引人的莫过于提供了 sql 接口，是目前 NoSQL 里最像 mysql 的，只是没有 ACID 的特性，发展很快，支持了索引等特性，上手容易，对于数据量远超内存限制的场景来说，还需要慎重。</p>
<p>特性</p>
<ul>
<li>BSON（一种JSON的扩展）存储</li>
<li>支持服务器端js脚本</li>
<li>支持聚合的管道</li>
<li>支持MapReduce</li>
<li>支持的查询语言非常强大</li>
<li>面向集合存储，易存储对象类型的数据</li>
<li>支持完全索引，包含内部对象</li>
<li>单个文档大小有限制、内存要求较大、非事务</li>
<li>可以使用不同的存储引擎，如rocksdb</li>
<li>实时的插入、更新与查询的需求，并具备应用程序实时数据存储所需的复制及高度伸缩性</li>
</ul>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://www.mongodb.com/" target="_blank" rel="noopener">https://www.mongodb.com/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/mongodb/mongo" target="_blank" rel="noopener">https://github.com/mongodb/mongo</a></p>
</li>
<li><p>Elasticsearch、MongoDB和Hadoop比较</p>
<p><a href="https://www.jianshu.com/p/2c7b0c76fa04" target="_blank" rel="noopener">https://www.jianshu.com/p/2c7b0c76fa04</a></p>
</li>
</ul>
<h4 id="列存储数据库"><a href="#列存储数据库" class="headerlink" title="列存储数据库"></a>列存储数据库</h4><p>这部分数据库通常是用来应对分布式存储的海量数据。键仍然存在，但是它们的特点是<strong>指向了多个列。这些列是由列家族来安排的</strong>。</p>
<h5 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h5><p>HBase(Hadoop Database)，是一个高可靠性、高性能、面向列、可伸缩的分布式存储系统，利用HBase技术可在廉价PC Server上搭建起大规模结构化存储集群。HBase<strong>是Google Bigtable的开源实现</strong>，类似Google Bigtable利用GFS作为其文件存储系统，HBase<strong>利用Hadoop HDFS作为其文件存储系统</strong>；Google运行MapReduce来处理Bigtable中的海量数据，HBase同样<strong>利用Hadoop MapReduce来处理HBase中的海量数据</strong>；Google Bigtable利用 Chubby作为协同服务，HBase<strong>利用Zookeeper作为协同服务</strong>。</p>
<p>Pig和Hive还为HBase提供了<strong>高层语言支持</strong>，使得在HBase上进行数据统计处理变的非常简单。Sqoop则为HBase提供了<strong>方便的RDBMS数据导入功能</strong>，使得传统数据库数据向HBase中迁移变的非常方便。</p>
<p>特性</p>
<ul>
<li>强一致性读写：HBase不是“Eventual Consistentcy（最终一致性）”数据存储，这让它很适合高速计数聚合类任务</li>
<li>自动分片（Automatic sharding）：HBase表通过region分布在集群中，数据增长时，region会自动分割并重新分布</li>
<li>RegionServer自动故障转移</li>
<li>Hadoop/HDFS集成：HBase支持开箱即用HDFS作为它的分布式文件系统</li>
<li>MapRecue：HBase通过MapRecue支持大并发处理</li>
<li>可查询历史版本</li>
<li>Java客户端API：HBase支持易于使用的Java API进行编程访问</li>
<li>Thrift/REST API：HBase也支持Thrift和Rest作为非Java前端访问</li>
<li>Block Cache和Bloom Filter：对于大容量查询优化，HBase支持Block Cache和Bloom Filter</li>
<li>运维管理：HBase支持JMX提供内置网页用于运维</li>
</ul>
<p>适用场景</p>
<ol>
<li>写密集型应用，每天写入量巨大，而相对读数量较小的应用，比如IM的历史消息，游戏的日志等等</li>
<li>不需要复杂查询条件来查询数据的应用，HBase<strong>只支持基于rowkey的查询</strong>，对于HBase来说，单条记录或者小范围的查询是可以接受的，大范围的查询由于分布式的原因，可能在性能上有点影响，而对于像SQL的join等查询，HBase无法支持</li>
<li>对性能和可靠性要求非常高的应用，由于HBase<strong>本身没有单点故障，可用性非常高</strong></li>
</ol>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://hbase.apache.org/" target="_blank" rel="noopener">https://hbase.apache.org/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/apache/hbase" target="_blank" rel="noopener">https://github.com/apache/hbase</a></p>
</li>
<li><p>一张图看懂HBase</p>
<p><a href="https://blog.csdn.net/u011331430/article/details/79036441" target="_blank" rel="noopener">https://blog.csdn.net/u011331430/article/details/79036441</a></p>
</li>
</ul>
<h5 id="Accumulo"><a href="#Accumulo" class="headerlink" title="Accumulo"></a>Accumulo</h5><p>Apache Accumulo 是一个可靠的、可伸缩的、高性能的排序分布式的 Key-Value 存储解决方案，基于单元访问控制以及可定制的服务器端处理。使用 Google BigTable 设计思路，基于Apache Hadoop、Zookeeper 和 Thrift 构建。由美国国家安全局开发，并于2011年发布的。</p>
<p>Accumulo 支持<strong>高效存储和结构多样化</strong>，包括范围查询，为 MapReduce 的 job 提供 input 和 output 支持。 Accumulo 优点是<strong>自动负载均衡和分片，数据压缩和安全机制</strong>。</p>
<p>特性</p>
<ul>
<li>使用HDFS存储数据，zk保证一致性</li>
<li>对数据保护的<strong>安全性高</strong></li>
<li>支持ACID原则</li>
<li>读写性能强</li>
</ul>
<p>和HBase差别不是很大，关键特性在于安全性，可以控制每一列是否允许用户进行查询，除政府之外的企业用的比较少</p>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://accumulo.apache.org/" target="_blank" rel="noopener">https://accumulo.apache.org/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/apache/accumulo" target="_blank" rel="noopener">https://github.com/apache/accumulo</a></p>
</li>
<li><p>Leveldb/Rocksdb/Accumulo简单比较</p>
<p><a href="https://www.jianshu.com/p/4c57cd82ccde" target="_blank" rel="noopener">https://www.jianshu.com/p/4c57cd82ccde</a></p>
</li>
</ul>
<h5 id="Cassandra"><a href="#Cassandra" class="headerlink" title="Cassandra"></a>Cassandra</h5><p>一个大规模可扩展的分布式开源 NoSQL 数据库，完美适用于跨数据中心/云端的结构化数据、半结构化数据和非结构化数据，同时，Cassandra 高可用、线性可扩展、高性能、无单点。类似 amazon 的 Dynamo，和 Dynamo不同之处在于，Cassandra 结合了 Google Bigtable 的 ColumnFamily 的数据模型</p>
<p>在关系型数据库中，数据模式的修改成本很高，而这却降低了查询模式的修改成本；Cassandra 则与之相反，<strong>改变查询模式要比改变其数据模式代价更高</strong></p>
<p>例如：银行业，金融业（虽然对于金融交易不是必须的，但这些产业对数据库的要求会比它们更大）写比读更快，所以一个自然的特性就是实时数据分析</p>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="http://cassandra.apache.org/" target="_blank" rel="noopener">http://cassandra.apache.org/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/apache/cassandra" target="_blank" rel="noopener">https://github.com/apache/cassandra</a></p>
</li>
<li><p>HBase和Cassandra比较</p>
<p><a href="https://yq.aliyun.com/articles/25706" target="_blank" rel="noopener">https://yq.aliyun.com/articles/25706</a></p>
</li>
</ul>
<h5 id="Kudu"><a href="#Kudu" class="headerlink" title="Kudu"></a>Kudu</h5><p>Kudu 实现的是既可以实现数据的快速插入与实时更新，也可以实现数据的快速分析。Kudu 的定位不是取代HBase，而是以降低写的性能为代价，提高了批量读的性能，使其能够实现快速在线分析。设计上借鉴了 HBase。</p>
<p>Kudu 试图在 OLAP 与 OLTP 之间，寻求一个最佳的结合点，从而在一个系统的一份数据中，既能支持 OLTP 型实时读写能力又能支持 OLAP 型分析；Kudu 作为一个新的分布式存储系统期望有效提升 CPU 的使用率，而低 CPU 使用率恰是 HBase/Cassandra 等系统的最大问题</p>
<p>适用于需要进行实时分析的系统中，按行进行读取时效率较差</p>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://kudu.apache.org/" target="_blank" rel="noopener">https://kudu.apache.org/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/apache/kudu" target="_blank" rel="noopener">https://github.com/apache/kudu</a></p>
</li>
<li><p>kudu论文</p>
<p><a href="https://kudu.apache.org/kudu.pdf" target="_blank" rel="noopener">https://kudu.apache.org/kudu.pdf</a></p>
</li>
<li><p>Kudu：一个融合低延迟写入和高性能分析的存储系统</p>
<p><a href="https://www.jianshu.com/p/a6c0fdec3d7b" target="_blank" rel="noopener">https://www.jianshu.com/p/a6c0fdec3d7b</a></p>
</li>
<li><p>Kudu vs HBase</p>
<p><a href="https://bigdata.163.com/product/article/15" target="_blank" rel="noopener">https://bigdata.163.com/product/article/15</a></p>
</li>
</ul>
<hr>
<p>列存对于 OLAP 非常友好，但在写入的时候压力可能会比较大，如果一个 table 有很多 column，写入性能影响会非常明显。行存则是对于 OLTP 比较友好，但在读取的时候会将整行数据全读出来，在一些分析场景下压力会有点大。但无论列存还是行存，都是为满足不同的业务场景而服务的，有一些数据库使用的是行列混存</p>
<h4 id="图形数据库"><a href="#图形数据库" class="headerlink" title="图形数据库"></a>图形数据库</h4><p>图形结构的数据库同其他行列以及刚性结构的SQL数据库不同，它是<strong>使用灵活的图形模型</strong>，并且能够扩展到多个服务器上。NoSQL数据库没有标准的查询语言(SQL)，因此进行数据库查询需要制定数据模型。许多NoSQL数据库都有REST式的数据接口或者查询API。</p>
<h5 id="Neo4j"><a href="#Neo4j" class="headerlink" title="Neo4j"></a>Neo4j</h5><p>Neo4j 是目前最流行的图形数据库，支持完整的事务，在属性图中，图是由顶点（Vertex），边（Edge）和属性（Property）组成的，顶点和边都可以设置属性，顶点也称作节点，边也称作关系，每个节点和关系都可以由一个或多个属性。Neo4j 创建的图是用顶点和边构建一个有向图，其查询语言 cypher 已经成为事实上的标准。</p>
<p>应用场景：适用于图形一类数据。这是Neo4j与其他nosql数据库的最显著区别</p>
<p>例如：社会关系，公共交通网络，地图及网络拓谱</p>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://neo4j.com/" target="_blank" rel="noopener">https://neo4j.com/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/neo4j/neo4j" target="_blank" rel="noopener">https://github.com/neo4j/neo4j</a></p>
</li>
<li><p>在线演示</p>
<p><a href="http://console.neo4j.org/" target="_blank" rel="noopener">http://console.neo4j.org/</a></p>
</li>
</ul>
<h5 id="OrientDB"><a href="#OrientDB" class="headerlink" title="OrientDB"></a>OrientDB</h5><p>OrientDB 是在2011年发布的新一代分布式 NoSQL 数据库，能够处理 Graph、Document、Key-Value、GeoSpatial 和 Reactive 五种模型，是目前最流行的一款多模型数据库。</p>
<p>在 OrientDB 中，任何类型的数据都是可搜索的，用户域的建模支持面向对象的概念，可以很容易地扩展。 每个模型不只是一个层，而是共存于一个引擎中。可选<strong>无模式、全模式或混合模式</strong>。</p>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="https://orientdb.com/" target="_blank" rel="noopener">https://orientdb.com/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/orientechnologies/orientdb" target="_blank" rel="noopener">https://github.com/orientechnologies/orientdb</a></p>
</li>
<li><p>orientdb vs neo4j</p>
<p><a href="https://orientdb.com/orientdb-vs-neo4j/" target="_blank" rel="noopener">https://orientdb.com/orientdb-vs-neo4j/</a></p>
</li>
</ul>
<h5 id="JanusGraph"><a href="#JanusGraph" class="headerlink" title="JanusGraph"></a>JanusGraph</h5><p>JanusGraph 是 Titan1.0.0 版本的延续，Titan 是从2012年开始开发，到2016年停止维护的一个分布式图数据库。JanusGraph 继承了 Titan 的全部功能并做了进一步的改进，并支持 Hadoop 2 和 Tinkerpop 3.2.3，采用 Gremlin 图查询语言。</p>
<p>相关网址</p>
<ul>
<li><p>官网</p>
<p><a href="http://janusgraph.org/" target="_blank" rel="noopener">http://janusgraph.org/</a></p>
</li>
<li><p>github</p>
<p><a href="https://github.com/JanusGraph/janusgraph" target="_blank" rel="noopener">https://github.com/JanusGraph/janusgraph</a></p>
</li>
<li><p>中文文档</p>
<p><a href="https://xiuxiuing.gitee.io/blog/2018/11/13/JanusGraph/" target="_blank" rel="noopener">https://xiuxiuing.gitee.io/blog/2018/11/13/JanusGraph/</a></p>
</li>
<li><p>JanusGraph学习手册</p>
<p><a href="https://blog.csdn.net/xd2ss/article/details/83930009" target="_blank" rel="noopener">https://blog.csdn.net/xd2ss/article/details/83930009</a></p>
</li>
</ul>
<h3 id="NoSQL数据库选择"><a href="#NoSQL数据库选择" class="headerlink" title="NoSQL数据库选择"></a>NoSQL数据库选择</h3><p><a href="http://www.dataversity.net/choose-right-nosql-database-application/" target="_blank" rel="noopener">选择合适的NoSQL数据库</a></p>
<p><img src="http://assets.processon.com/chart_image/5c1c4fcbe4b0bcd70c413c6b.png?_=1545365110359" alt="NoSQL数据库选择"></p>
</div></article></div></main><footer><div class="paginator"><a class="next" href="/2019/02/15/SPI机制介绍/">NEXT</a></div><div class="copyright"><p>© 2019 PEACE & LOVE</p><p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>, <a href="https://github.com/jeremyfan/hexo-theme-still" target="_blank">theme</a> by <a href="https://github.com/jeremyfan" target="_blank">jeremyfan</a>.</p></div></footer></div></body></html>